<html>
    <title>Main</title>
    <head><b>Steel Refinery <a href="https://github.com/lawrencesxp/steelrefinery">Github</a> (WIP)</b>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Supply Chain Master</title>
        <style>
            /* CSS for three-column layout */
            .container {
                display: flex; /* Use flexbox to create three columns */
                justify-content: space-between; /* Space out the columns evenly */
                width: 100%;
                max-width: 8000px; /* Kept as per your original */
                margin: 0 auto; /* Center the container */
            }
            .left-column, .middle-column, .right-column {
                padding: 1px; /* Kept as per your original */
            }
            .left-column {
                flex: 1; /* Equal width for all columns by default */
            }
            .middle-column {
                flex: 1; /* Equal width */
            }
            .right-column {
                flex: 1; /* Equal width */
                text-align: left; /* Kept as per your original */
            }
            
            /* ADD THIS: Dialog box styling */
            #welcomeDialog {
                position: fixed;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background-color: #c0c0c0;
                border: 2px solid black;
                padding: 20px;
                width: 400px;
                font-family: "Times New Roman", Times, serif;
                display: none;
                z-index: 1000;
            }

            #dialogOverlay {
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background-color: rgba(0, 0, 0, 0.5);
                display: none;
                z-index: 999;
            }

            .dialogButton {
                margin-top: 10px;
                padding: 5px 20px;
                font-family: "Times New Roman", Times, serif;
            }
        </style>
        <link rel="stylesheet" href="main.css">
        </head>
    <body id="mainBody">
        
        <!-- ADD THIS: Dialog Box -->
        <div id="dialogOverlay"></div>
        <div id="welcomeDialog">
            <center>
                <img id="representativeImage" src="" width="150" height="100" border="1">
                <br><br>
                <font size="4"><b id="companyName"></b></font>
                <br><br>
                <font size="3"><p id="welcomeMessage"></p></font>
                <br>
                <button class="dialogButton" onclick="closeDialog()">Begin Operations</button>
            </center>
        </div>
        
        <div class="container">

            <div class="left-column">

        <p><br>Steel is made by refining iron with coke and limestone. One ton of steel is created by processing 1.5 tons of iron,
             0.5 tons of coal and 0.25 tons of limestone.
             <a href="info.html">Tutorial</a></p>
        
             <p><b>Procurement</b><br>Price of Iron: $115/ton<br>
                Coke Price: $275/ton<br>
                Limestone Price: $35/ton<br>
            </p>
            <div style="display: flex; flex-direction: column; gap: 1px;">
                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="b_iron" style="width: 120px;">Buy Iron</label>
                    <input type="number" id="b_iron" value="0" style="width: 100px;">
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                    <label for="b_coke" style="width: 120px;">Buy Coke</label>
                    <input type="number" id="b_coke" value="0" style="width: 100px;">
                </div>
                <div style="display: flex; align-items: center; gap: 10px;">
                        <label for="b_limestone" style="width: 120px;">Buy Limestone</label>
                        <input type="number" id="b_limestone" value="0" style="width: 100px;">
                </div>
            <p>Procurement cost: $ <span id = "c_procure"></span></p>
            </div><button onclick="updateOrder(),calculateAndDisplaySteel(), rawprices()">Create order</button>

        <p><b>Resource Inventory</b><br>
            Iron (tons): <span id="iron"></span><br>
            Coke (tons): <span id="coke"></span><br>
            Limestone (tons): <span id="limestone"></span></p>

        <p>Amount of steel that can be produced: <span id="steelAmount">0</span> ton(s)<br>
            Market Price: $880/ton<br>
            Refined Steel: <span id="RefinedSteel"></span> ton(s)<br></p>
        <button onclick="RefineSteel()">Refine steel</button>
        <button onclick="SellSteel()">Sell steel inventory</button>
            
    </div>

    <div class="middle-column">

        <p><b>Talent pool</b><br>Number of workers: <span id="workers">20</span><br>
        Plant efficiency: <span id="efficiency"></span>%</p>

        <div style="display: flex; flex-direction: column; gap: 1px;">
            <div style="display: flex; align-items: center; gap: 10px;">
                <label for="hireWorkers" style="width: 90px;">Hire workers</label>
                <input type="number" id="hireWorkers" value="" style="width: 100px;">
            </div>
            <div style="display: flex; align-items: center; gap: 10px;">
                <label for="fireWorkers" style="width: 90px;">Fire workers</label>
                <input type="number" id="fireWorkers" value="" style="width: 100px;">
            </div>
        </div>
        <br><button onclick="updateTalentPool()">Update talent pool</button>

    <p><b>Financials</b><br>
        
        Income: $<span id = "s_income"></span><br>
        Projected expenses: $<span id="expenses">85000</span><br>
        Current account: $<span id="currentaccount">100000</span><br>
        Next month's forecast: $<span id="forecast"></span></p>
        

    </div>

    <div class="right-column">
        <p><b>Infrastructure</b><br>
            Electric Arc Furnace (EAF): <span id = "eaflvl"></span><br> (max refining capacity: <span id = "eafmax">
            </span> tons)<br>
            <!--<button onclick="procureeaf()">Purchase additional EAF</button><-->
            
            Ladle Furnace (LF): <span id = "lflvl"></span><br> (max refining capacity: <span id = "lfmax"></span> tons)</p>
            <!--<button onclick="procurelf()">Purchase additional LF</button><-->  
            <button onclick="resetGame()">Reset game</button>
    </div>
    
    <!-- ADD THIS: Company-specific script BEFORE your existing script.js -->
    <script>
    // Company data
    const companyData = {
        usa: {
            name: "US Steel",
            bgcolor: "#87CEEB", // Sky blue
            image: "images/usa-company.jpg",
            message: "Founded by J.P Morgan in 1901, we were once the backbone of American industrial might. Help America reindustrialize with domestic production, providing jobs and protecting national interests."
        },
        china: {
            name: "Baowu Steel Group",
            bgcolor: "#DC143C", // Crimson
            image: "images/china-company.jpg",
            message: "Wholly owned by the State Council of the People's Republic of China, we are the world's largest steel producer. Let us forge the fruits of socialist labour."
        },
        eu: {
            name: "ArselorMittal",
            bgcolor: "#4169E1", // Royal blue
            image: "images/eu-company.jpg",
            message: "we suck crazy style. i am europe i like da ciggarette and unemployment."
        },
        russia: {
            name: "Magnitogorsk Iron & Steel",
            bgcolor: "#8B0000", // Dark red
            image: "images/russia-company.jpg",
            message: "Situated by the great Urals, Magnitogorsk or 'city of the magnetic mountain' was established through Joseph Vissarionovich Stalin's first five-year plans."
        },
        japan: {
            name: "Nippon",
            bgcolor: "#FF69B4", // Hot pink (cherry blossom inspired)
            image: "images/japan-company.jpg",
            message: "japan! we are japan! we make steel! japan!"
        },
        india: {
            name: "Tatta Steel",
            bgcolor: "#FF8C00", // Dark orange
            image: "images/india-company.jpg",
            message: "i really don't know what to put in here."
        },
        korea: {
            name: "POSKO",
            bgcolor: "#00CED1", // Dark turquoise
            image: "images/southkorea-company.jpg",
            message: "steel but korean. that is all there is to say."
        }
    };

    // Get company from URL parameter
    const urlParams = new URLSearchParams(window.location.search);
    const company = urlParams.get('company') || 'usa'; // Default to USA if no parameter

    // Set background color and show dialog
    window.onload = function() {
        const data = companyData[company];
        
        // Set background color
        document.getElementById('mainBody').style.backgroundColor = data.bgcolor;
        
        // Set dialog content
        document.getElementById('companyName').innerText = data.name;
        document.getElementById('representativeImage').src = data.image;
        document.getElementById('welcomeMessage').innerText = data.message;
        
        // Show dialog
        document.getElementById('dialogOverlay').style.display = 'block';
        document.getElementById('welcomeDialog').style.display = 'block';
    };

    function closeDialog() {
        document.getElementById('dialogOverlay').style.display = 'none';
        document.getElementById('welcomeDialog').style.display = 'none';
    }
    </script>
    
    <script src="script.js"></script>

    <!-- Add this where you want the GIF to appear in your HTML -->
    <!-- <img src="metalrefine.gif" alt="Animation" width="200" height="200" align="right" hspace="10" vspace="10"> -->

    </body>
</html>